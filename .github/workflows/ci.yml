name: CI

on:
  push:
    branches: [main]
  pull_request:

jobs:
  test:
    uses: ./.github/workflows/_test.yml
    with:
      # Run E2E tests only on main branch pushes (not PRs)
      run_e2e: ${{ github.event_name == 'push' && github.ref == 'refs/heads/main' }}
    secrets: inherit
